drop table rights;
drop table photos;
drop table albums;
drop table statuts;
drop table users;

create table users(
idUser int not null GENERATED BY DEFAULT AS IDENTITY,
name varchar(255),
firstName varchar(255),
login varchar(255),
password varchar(255),
date_created date,
time_created time,
date_lastUpdate date default null,
time_lastUpdate time default null,
constraint PK_Users primary key (idUser)
);

create table statuts(
idStatut int not null GENERATED BY DEFAULT AS IDENTITY,
libelle varchar(45),
constraint PK_Statut primary key (idStatut)
);

create table albums(
idAlbum int not null GENERATED BY DEFAULT AS IDENTITY,
nameAlbum varchar(255),
descr varchar(500),
idUser int,
idStatut int,
constraint FK_Albums_Users foreign key (idUser) references users(idUser),
constraint FK_Albums_Status foreign key (idStatut) references statuts(idStatut),
constraint PK_Albums primary key (idAlbum)
);

create table photos(
idPhoto int not null GENERATED BY DEFAULT AS IDENTITY,
title varchar(255),
descr varchar(500),
width int,
height int,
img varchar(255),
keyword varchar(500),
date_created date,
time_created time,
date_lastUpdate date default null,
time_lastUpdate time default null,
idAlbum int,
constraint FK_Photos_Albums foreign key (idAlbum) references albums(idAlbum),
constraint PK_Photos primary key (idPhoto)
);

create table rights(
idUser int not null,
idAlbum int not null,
lire boolean default true,
inserer boolean default false,
modifier boolean default false,
supprimer boolean default false,
constraint FK_Rights_Users foreign key (idUser) references users(idUser),
constraint FK_Rights_Albums foreign key (idAlbum) references albums(idAlbum),
constraint PK_Rights primary key (idUser,idAlbum)
);